ANS 1)

--> raw_sockets.c : The raw socket code has been taken from 
    1)https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/
    2)https://gist.github.com/austinmarton/1922600
    
--> client.py : The integration of python and C is taken from this example from stack overflow:
    http://stackoverflow.com/questions/4241415/import-c-function-into-python-program


ANS 2)


My Fast Pass agent is implemented in combination of python and c. Command parser and communication with Arbiter is coded
in python socket. The code to generate and send packets is done in c raw sockets (code is takes from this library available :
https://gist.github.com/austinmarton/1922600)
Flow of the program:

--> cperf binary is called with .tr file as input
--> cperf (python) reads the input file and appends its to a list
--> the list is passed to send_demand() function which sends the demand to Arbiter which sends backs the allocated vlan
--> alocated vlan string is parsed.Souce destination port and vlan id are converted to integer and sent to send_packets function
--> send packets function calls a shared library.so file which contains a function to send raw sockets. The module is called 
    using ctypes module.
--> The packet generation code is written in C. Most of the code has been from https://gist.github.com/austinmarton/1922600 and
    https://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/ as well as 
    example given by Omid.
--> If VLAN id is "NA" , that particular flow is appened at end of the lsit
--> Packets for each flow are sent sequesntially in batch mode.
    
    
ANS 2)

Arbiter Algorithm is very Simple:

--> No time Slot allocation
--> VLAN id is allocated based on available vlan id given source and destination. If no VLAN id is available "NA" is returned.
--> A data structure is generated when arbiter is run:
1 defaultdict(<type 'list'>, {2: [331], 3: [491, 492], 4: [651, 652], 5: [811, 812, 813, 814], 6: [971, 972, 973, 974], 7: [1131, 1132, 1133, 1134], 8: [1291, 1292, 1293, 1294], 9: [1451, 1452, 1453, 1454], 10: [1611, 1612, 1613, 1614], 11: [1771, 1772, 1773, 1774], 12: [1931, 1932, 1933, 1934], 13: [2091, 2092, 2093, 2094], 14: [2251, 2252, 2253, 2254], 15: [2411, 2412, 2413, 2414], 16: [2571, 2572, 2573, 2574]})
2 defaultdict(<type 'list'>, {1: [181], 3: [501, 502], 4: [661, 662], 5: [821, 822, 823, 824], 6: [981, 982, 983, 984], 7: [1141, 1142, 1143, 1144], 8: [1301, 1302, 1303, 1304], 9: [1461, 1462, 1463, 1464], 10: [1621, 1622, 1623, 1624], 11: [1781, 1782, 1783, 1784], 12: [1941, 1942, 1943, 1944], 13: [2101, 2102, 2103, 2104], 14: [2261, 2262, 2263, 2264], 15: [2421, 2422, 2423, 2424], 16: [2581, 2582, 2583, 2584]})
3 defaultdict(<type 'list'>, {1: [191, 192], 2: [351, 352], 4: [671], 5: [831, 832, 833, 834], 6: [991, 992, 993, 994], 7: [1151, 1152, 1153, 1154], 8: [1311, 1312, 1313, 1314], 9: [1471, 1472, 1473, 1474], 10: [1631, 1632, 1633, 1634], 11: [1791, 1792, 1793, 1794], 12: [1951, 1952, 1953, 1954], 13: [2111, 2112, 2113, 2114], 14: [2271, 2272, 2273, 2274], 15: [2431, 2432, 2433, 2434], 16: [2591, 2592, 2593, 2594]})
4 defaultdict(<type 'list'>, {1: [201, 202], 2: [361, 362], 3: [521], 5: [841, 842, 843, 844], 6: [1001, 1002, 1003, 1004], 7: [1161, 1162, 1163, 1164], 8: [1321, 1322, 1323, 1324], 9: [1481, 1482, 1483, 1484], 10: [1641, 1642, 1643, 1644], 11: [1801, 1802, 1803, 1804], 12: [1961, 1962, 1963, 1964], 13: [2121, 2122, 2123, 2124], 14: [2281, 2282, 2283, 2284], 15: [2441, 2442, 2443, 2444], 16: [2601, 2602, 2603, 2604]})
5 defaultdict(<type 'list'>, {1: [211, 212, 213, 214], 2: [371, 372, 373, 374], 3: [531, 532, 533, 534], 4: [691, 692, 693, 694], 6: [1011], 7: [1171, 1172], 8: [1331, 1332], 9: [1491, 1492, 1493, 1494], 10: [1651, 1652, 1653, 1654], 11: [1811, 1812, 1813, 1814], 12: [1971, 1972, 1973, 1974], 13: [2131, 2132, 2133, 2134], 14: [2291, 2292, 2293, 2294], 15: [2451, 2452, 2453, 2454], 16: [2611, 2612, 2613, 2614]})
6 defaultdict(<type 'list'>, {1: [221, 222, 223, 224], 2: [381, 382, 383, 384], 3: [541, 542, 543, 544], 4: [701, 702, 703, 704], 5: [861], 7: [1181, 1182], 8: [1341, 1342], 9: [1501, 1502, 1503, 1504], 10: [1661, 1662, 1663, 1664], 11: [1821, 1822, 1823, 1824], 12: [1981, 1982, 1983, 1984], 13: [2141, 2142, 2143, 2144], 14: [2301, 2302, 2303, 2304], 15: [2461, 2462, 2463, 2464], 16: [2621, 2622, 2623, 2624]})
7 defaultdict(<type 'list'>, {1: [231, 232, 233, 234], 2: [391, 392, 393, 394], 3: [551, 552, 553, 554], 4: [711, 712, 713, 714], 5: [871, 872], 6: [1031, 1032], 8: [1351], 9: [1511, 1512, 1513, 1514], 10: [1671, 1672, 1673, 1674], 11: [1831, 1832, 1833, 1834], 12: [1991, 1992, 1993, 1994], 13: [2151, 2152, 2153, 2154], 14: [2311, 2312, 2313, 2314], 15: [2471, 2472, 2473, 2474], 16: [2631, 2632, 2633, 2634]})
8 defaultdict(<type 'list'>, {1: [241, 242, 243, 244], 2: [401, 402, 403, 404], 3: [561, 562, 563, 564], 4: [721, 722, 723, 724], 5: [881, 882], 6: [1041, 1042], 7: [1201], 9: [1521, 1522, 1523, 1524], 10: [1681, 1682, 1683, 1684], 11: [1841, 1842, 1843, 1844], 12: [2001, 2002, 2003, 2004], 13: [2161, 2162, 2163, 2164], 14: [2321, 2322, 2323, 2324], 15: [2481, 2482, 2483, 2484], 16: [2641, 2642, 2643, 2644]})
9 defaultdict(<type 'list'>, {1: [251, 252, 253, 254], 2: [411, 412, 413, 414], 3: [571, 572, 573, 574], 4: [731, 732, 733, 734], 5: [891, 892, 893, 894], 6: [1051, 1052, 1053, 1054], 7: [1211, 1212, 1213, 1214], 8: [1371, 1372, 1373, 1374], 10: [1691], 11: [1851, 1852], 12: [2011, 2012], 13: [2171, 2172, 2173, 2174], 14: [2331, 2332, 2333, 2334], 15: [2491, 2492, 2493, 2494], 16: [2651, 2652, 2653, 2654]})
10 defaultdict(<type 'list'>, {1: [261, 262, 263, 264], 2: [421, 422, 423, 424], 3: [581, 582, 583, 584], 4: [741, 742, 743, 744], 5: [901, 902, 903, 904], 6: [1061, 1062, 1063, 1064], 7: [1221, 1222, 1223, 1224], 8: [1381, 1382, 1383, 1384], 9: [1541], 11: [1861, 1862], 12: [2021, 2022], 13: [2181, 2182, 2183, 2184], 14: [2341, 2342, 2343, 2344], 15: [2501, 2502, 2503, 2504], 16: [2661, 2662, 2663, 2664]})
11 defaultdict(<type 'list'>, {1: [271, 272, 273, 274], 2: [431, 432, 433, 434], 3: [591, 592, 593, 594], 4: [751, 752, 753, 754], 5: [911, 912, 913, 914], 6: [1071, 1072, 1073, 1074], 7: [1231, 1232, 1233, 1234], 8: [1391, 1392, 1393, 1394], 9: [1551, 1552], 10: [1711, 1712], 12: [2031], 13: [2191, 2192, 2193, 2194], 14: [2351, 2352, 2353, 2354], 15: [2511, 2512, 2513, 2514], 16: [2671, 2672, 2673, 2674]})
12 defaultdict(<type 'list'>, {1: [281, 282, 283, 284], 2: [441, 442, 443, 444], 3: [601, 602, 603, 604], 4: [761, 762, 763, 764], 5: [921, 922, 923, 924], 6: [1081, 1082, 1083, 1084], 7: [1241, 1242, 1243, 1244], 8: [1401, 1402, 1403, 1404], 9: [1561, 1562], 10: [1721, 1722], 11: [1881], 13: [2201, 2202, 2203, 2204], 14: [2361, 2362, 2363, 2364], 15: [2521, 2522, 2523, 2524], 16: [2681, 2682, 2683, 2684]})
13 defaultdict(<type 'list'>, {1: [291, 292, 293, 294], 2: [451, 452, 453, 454], 3: [611, 612, 613, 614], 4: [771, 772, 773, 774], 5: [931, 932, 933, 934], 6: [1091, 1092, 1093, 1094], 7: [1251, 1252, 1253, 1254], 8: [1411, 1412, 1413, 1414], 9: [1571, 1572, 1573, 1574], 10: [1731, 1732, 1733, 1734], 11: [1891, 1892, 1893, 1894], 12: [2051, 2052, 2053, 2054], 14: [2371], 15: [2531, 2532], 16: [2691, 2692]})
14 defaultdict(<type 'list'>, {1: [301, 302, 303, 304], 2: [461, 462, 463, 464], 3: [621, 622, 623, 624], 4: [781, 782, 783, 784], 5: [941, 942, 943, 944], 6: [1101, 1102, 1103, 1104], 7: [1261, 1262, 1263, 1264], 8: [1421, 1422, 1423, 1424], 9: [1581, 1582, 1583, 1584], 10: [1741, 1742, 1743, 1744], 11: [1901, 1902, 1903, 1904], 12: [2061, 2062, 2063, 2064], 13: [2221], 15: [2541, 2542], 16: [2701, 2702]})
15 defaultdict(<type 'list'>, {1: [311, 312, 313, 314], 2: [471, 472, 473, 474], 3: [631, 632, 633, 634], 4: [791, 792, 793, 794], 5: [951, 952, 953, 954], 6: [1111, 1112, 1113, 1114], 7: [1271, 1272, 1273, 1274], 8: [1431, 1432, 1433, 1434], 9: [1591, 1592, 1593, 1594], 10: [1751, 1752, 1753, 1754], 11: [1911, 1912, 1913, 1914], 12: [2071, 2072, 2073, 2074], 13: [2231, 2232], 14: [2391, 2392], 16: [2711]})
16 defaultdict(<type 'list'>, {1: [321, 322, 323, 324], 2: [481, 482, 483, 484], 3: [641, 642, 643, 644], 4: [801, 802, 803, 804], 5: [961, 962, 963, 964], 6: [1121, 1122, 1123, 1124], 7: [1281, 1282, 1283, 1284], 8: [1441, 1442, 1443, 1444], 9: [1601, 1602, 1603, 1604], 10: [1761, 1762, 1763, 1764], 11: [1921, 1922, 1923, 1924], 12: [2081, 2082, 2083, 2084], 13: [2241, 2242], 14: [2401, 2402], 15: [2561]})

This is defaultDict of List.


